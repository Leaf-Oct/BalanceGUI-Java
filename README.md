# 收支记录

十月叶自用的银行卡收支记录软件客户端，服务端采用MongoDB存储收支数据(后续可能会升级为SQL数据库)。

是另一个项目 [BalanceGUI](https://github.com/Leaf-Oct/BalanceGUI) 的Java实现版本。

在Ubuntu系统下，go语言的fyne库存在bug，其文本框组件在拼音输入时，删除拼音字母会将先前已输入的文本一同删除。该bug在2024年12月的版本依然存在。

![bug](img/bug.gif)

因此决定放弃go版本，转用Java实现。

客户端采用Java语言编写，GUI库采用Java FX，主要功能为根据配置文件连接数据库，让用户选择日期，输入开支和对应描述，存入数据库中。

但用Java实现后，在Ubuntu下仍有大问题。JavaFX的文本框组件无法输入中文，中文输入法完全失效。

~~但复制粘贴还可以，就凑合用了~~

## 配置文件

编译后的可执行文件，需要在同一目录下放置一个文本文件，名为config。或启动时，通过参数指定配置文件的路径

### config

配置文件，因为内容少所以格式上不是那么正式，基本只包含五行。

第一行是ip地址(或加端口)

第二行是用户名

第三行是密码

第四行是登录数据库

第五行是账户余额。每次退出程序时会将改行复写为最新值

最终会根据这几个信息构造出登录数据库的url，例如内容如下

> 127.0.0.1:2333
>
> root
>
> password
>
> admin
>
> 1145.14

最终登录url会构造为 `mongodb://root:password@127.0.0.1:2333/admin`

## 运行

```bash
java -jar BalanceGUIJava.jar /path/to/config
```

不加参数则默认读取当前路径下的config文件